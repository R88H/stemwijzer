<!doctype html>
<html lang="nl">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V429RK8QJP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-V429RK8QJP');
</script>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Eenvoudige Kieswijzer – Gemeenteraadsverkiezingen</title>
  <meta name="description" content="Eenvoudige kieswijzer voor de gemeenteraadsverkiezingen: beantwoord stellingen, kies je gemeente en zie direct welke partij bij je past. Snel, onafhankelijk en privacyvriendelijk." />
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
    :root{
      --bg: #0d2f67;
      --bg-grad-1: #0d2f67;
      --bg-grad-2: #14559b;
      --bg-grad-3: #0b234c;
      --panel:#ffffff;
      --text:#0d1d35;
      --muted:#50607a;
      --line:#d7e1ef;
      --accent:#0f5ca7;
      --accent-soft:#e8f1fb;
      --accent-strong:#0e4f92;
      --surface:#eff3fa;
      --agree:#188d62;
      --somewhat-agree:#3fa87e;
      --neutral:#e6edf7;
      --somewhat-disagree:#f4a45f;
      --disagree:#e95d51;
      --skip:#f0f2f7;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: 'Inter', system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial;
      color:var(--text);
      background:
        radial-gradient(circle at 12% 24%, rgba(255,255,255,0.12), transparent 32%),
        radial-gradient(circle at 90% 18%, rgba(255,255,255,0.12), transparent 34%),
        linear-gradient(140deg, var(--bg-grad-1) 0%, var(--bg-grad-2) 38%, var(--bg-grad-3) 100%);
      background-attachment: fixed;
    }
    header{
      position:sticky; top:0; z-index:10; background:rgba(11,58,119,0.9);
      backdrop-filter: blur(12px);
      border-bottom:1px solid rgba(255,255,255,0.16);
      color:#fff;
    }
    .wrap{ max-width:980px; margin:0 auto; padding:18px 16px 32px; }
    .row{ display:flex; gap:12px; align-items:center; flex-wrap:wrap }
    .grow{ flex:1 }
    h1{ font-size:20px; margin:8px 0; color:#fff; font-weight:700; letter-spacing:0.1px; }
    main{ padding:32px 16px 64px }
    .card{
      background:var(--panel);
      border:1px solid var(--line);
      border-radius:16px;
      padding:26px;
      box-shadow:0 22px 48px rgba(9,38,79,0.28);
    }
    .muted{ color:var(--muted) }
    .progress{ height:6px; background:var(--surface); border-radius:999px; overflow:hidden; margin:4px 0 18px }
    .bar{ height:100%; width:0; background:linear-gradient(90deg, #11a0ff 0%, #0f5ca7 90%); }
    .qhead{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin:8px 0 10px }
    .status-chip{ background:#0f5ca7; color:#fff; padding:7px 14px; border-radius:999px; font-weight:700; font-size:13px; display:inline-flex; align-items:center; gap:8px; letter-spacing:0.2px; }
    .qmeta{ display:flex; align-items:center; gap:10px }
    .qtheme{ margin:0 0 4px }
    .theme{ display:inline-block; font-size:12px; font-weight:800;
      color: var(--accent);
      background: var(--accent-soft);
      border:1px solid var(--line);
      border-radius:999px;
      padding:6px 12px; letter-spacing:0.15px; text-transform:uppercase; }

    .qtext{ font-size:28px; font-weight:800; line-height:1.34; color:#0e2c57; text-align:center; margin:14px 0 26px; }
    .answers{ display:flex; flex-wrap:wrap; gap:16px; margin-top:24px; justify-content:center; }
    .answers button{
      border:1px solid transparent;
      color:#fff;
      flex:1;
      min-width:120px;
      padding:12px 10px;
      border-radius:12px;
      cursor:pointer;
      font-weight:800;
      font-size:14px;
      transition: transform .1s ease, box-shadow .18s ease, filter .12s ease;
      text-align:center;
      box-shadow:0 8px 18px rgba(12,63,120,0.12);
      display:flex; flex-direction:column; align-items:center; gap:6px; letter-spacing:0.1px;
    }
    .answers button::before{
      content:'';
      width:30px; height:30px; border-radius:50%;
      border:2px solid rgba(255,255,255,0.78);
      background:rgba(255,255,255,0.25);
      box-shadow:inset 0 0 0 2px rgba(255,255,255,0.14);
    }
    .answers button:hover{ transform:translateY(-2px); filter:brightness(1.04); box-shadow:0 14px 26px rgba(12,63,120,0.24); }
    .answers button.selected{ box-shadow:0 16px 32px rgba(12,63,120,0.32); outline:2px solid rgba(255,255,255,0.58); }
    .answers button.ans-strong-yes{ background:var(--agree); }
    .answers button.ans-yes{ background:var(--somewhat-agree); }
    .answers button.ans-neutral{ background:var(--neutral); color:var(--text); border-color:var(--line); box-shadow:0 8px 16px rgba(8,40,80,0.1); }
    .answers button.ans-neutral::before{ border-color:rgba(13,29,53,0.28); background:rgba(255,255,255,0.5); }
    .answers button.ans-no{ background:var(--somewhat-disagree); }
    .answers button.ans-strong-no{ background:var(--disagree); }
    .answers button.ans-skip{ background:var(--skip); color:var(--muted); border:1px dashed var(--line); box-shadow:none; }
    .answers button.ans-skip::before{ border-color:rgba(92,111,133,0.45); background:rgba(92,111,133,0.12); }

    .nav-controls{ display:flex; gap:10px; margin-top:8px; justify-content:center; flex-wrap:wrap; }
    .nav-controls .btn{ min-width:128px; }
    .nav-controls .btn.primary{
      background:#fff;
      color:var(--accent);
      border-color:var(--line);
      box-shadow:0 8px 16px rgba(8,40,80,0.1);
    }
    .nav-controls .btn.primary:hover{
      background:var(--accent-soft);
      border-color:var(--accent);
    }

    .controls{ display:flex; gap:10px; margin-top:18px; flex-wrap:wrap; justify-content:flex-end }
    .btn{ border:1px solid var(--line); background:#fff; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:800; letter-spacing:0.1px; }
    .btn:disabled{ opacity:0.6; cursor:not-allowed }
    .btn.primary{ background:var(--accent); border-color:var(--accent); color:#fff }
    .btn.ghost{ background:transparent; color:var(--accent); border-color:rgba(12,27,42,0.1); }
    .share-section{ margin:18px 0; display:flex; flex-direction:column; gap:10px; }
    .share-options{ display:none; flex-wrap:wrap; gap:8px; }
    .share-options .btn{ background:#f8fafc; border-color:var(--line); color:var(--accent); }
    .share-options .btn:hover{ background:var(--accent-soft); border-color:var(--accent); }
    header #aboutBtn{
      background:rgba(255,255,255,0.16);
      color:#fff;
      border-color:rgba(255,255,255,0.38);
      box-shadow:inset 0 1px 0 rgba(255,255,255,0.45);
    }
    header #aboutBtn:hover{
      background:rgba(255,255,255,0.24);
      color:#fff;
      border-color:rgba(255,255,255,0.5);
    }
    .explain{ display:none; padding:12px; border:1px dashed var(--line); border-radius:10px; background:#fafafa; margin-top:12px }
    /* Result list */
    .plist{ display:flex; flex-direction:column; gap:8px; margin-top:8px }
    .prow{ display:flex; align-items:center; gap:12px; border:1px solid var(--line); border-radius:10px; padding:10px 12px; background:#fff }
    .rank{ font-weight:800; width:28px; text-align:center }
    .party{ font-weight:700 }
    .pct{ margin-left:auto; font-variant-numeric: tabular-nums; color:var(--muted) }
    @media (max-width:800px){
      .answers{ flex-direction:column; }
      .answers button{ width:100%; min-height:72px; }
    }
    /* Light neutral bottom bar + About modal */
    .footerbar{ position:fixed; left:0; right:0; bottom:0; background:#f8fafc; border-top:1px solid var(--line); z-index:30; }
    .aboutmodal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.35); z-index:40; padding:16px; }
    .aboutcard{ max-width:760px; width:100%; background:#fff; border:1px solid var(--line); border-radius:14px; padding:18px; }
    .abouthead{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:8px; }
    .aboutcontent h4{ margin:14px 0 6px; }
    .aboutcontent p, .aboutcontent li{ line-height:1.45; }

    .intro{ padding:54px 0 40px; color:#e5ecf5; text-align:center; }
    .intro .card{ background:rgba(255,255,255,0.08); border-color:rgba(255,255,255,0.16); color:#e5ecf5; box-shadow:0 24px 50px rgba(0,0,0,0.28); backdrop-filter: blur(5px); }
    .intro .card .muted{ color:rgba(229,236,245,0.82); }
    .intro h2{ color:#fff; font-size:28px; }
    .intro .btn.primary{ background:#fff; color:var(--accent); border-color:transparent; box-shadow:0 10px 22px rgba(0,0,0,0.18); padding:12px 18px; font-size:16px; }

    /* Intro-mode: hide quiz/progress on intro screen */
    body.intro-active .progress{ display:none !important; }
    body.intro-active main .card{ display:none !important; }
    body.intro-active #intro{ display:block !important; }

    .municipality-select{ display:flex; flex-direction:column; gap:6px; margin:12px 0 18px; }
    .municipality-select label{ font-weight:700; }
    .municipality-buttons{ display:flex; flex-wrap:wrap; gap:8px; }
    .municipality-buttons button{ border:1px solid var(--line); background:#fff; padding:10px 12px; border-radius:10px; font-weight:700; cursor:pointer; transition: background-color .15s ease, border-color .15s ease; }
    .municipality-buttons button:hover{ background:var(--accent-soft); border-color:var(--accent); }
    .municipality-buttons button.selected{ background:var(--accent-soft); border-color:var(--accent); color:var(--accent); }

    .municipality-banner{ display:flex; align-items:center; gap:8px; margin-bottom:12px; }
    .municipality-pill{ display:inline-flex; align-items:center; gap:6px; padding:6px 12px; border-radius:999px; border:1px solid var(--line); background:#f8fafc; font-weight:700; }

    /* Fix controls position: keep at bottom of quiz card */
    #quiz{ display:flex; flex-direction:column; min-height: 360px; gap:16px; }
    #quiz .answers{ flex:1; }
    #quiz .controls{ margin-top:auto; }

    /* Mobile: keep controls fixed at bottom of the question card */
    @media (max-width: 640px){
      #quiz{ min-height: 70vh; }
    }

    /* Extra spacing above control buttons */
    #quiz .controls{ padding-top: 28px; }

    /* Make About modal content scrollable on small screens */
    .aboutmodal .aboutcard{ max-height: 85vh; overflow: auto; }

    /* Over-modal: header always visible; content scrolls; clip to rounded corners */
    .aboutcard{ max-height:85vh; overflow:hidden; display:flex; flex-direction:column; }
    .abouthead{ position:sticky; top:0; background:#fff; z-index:2; box-shadow:0 1px 0 var(--line); }
    .aboutcontent{ overflow:auto; }

/* Intro: betere alinea- en lijstafstand (mobiel + desktop) */
#intro .card p {
  margin: 0 0 14px;
  line-height: 1.6;
}
#intro .card ul {
  margin: 0 0 16px 1.25rem;
  padding-left: 1.25rem;
}
#intro .card li {
  margin: 0 0 6px;
}

    /* Mobile-friendly: keep vraag, status en knoppen in beeld zonder scrollen */
    @media (max-width: 640px){
      body{ background-attachment: scroll; }
      main{ padding:16px 12px 64px; }
      header .wrap{ padding:12px 14px; }
      h1{ font-size:18px; margin:4px 0; }
      .card{ padding:18px 14px; }
      .status-chip{ padding:6px 12px; font-size:12px; }
      .qhead{ margin:4px 0 6px; }
      .qtext{ font-size:22px; margin:6px 0 14px; line-height:1.28; }
      .answers{ gap:10px; margin-top:12px; }
      .answers button{ min-height:56px; padding:10px 8px; font-size:13px; gap:4px; }
      .answers button::before{ width:24px; height:24px; border-width:1.5px; }
      #quiz{ min-height:auto; }
    }

  </style>
<script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {
        "@type":"Question",
        "name":"Hoe werkt de Eenvoudige Kieswijzer?",
        "acceptedAnswer":{"@type":"Answer","text":"Je beantwoordt stellingen. We vergelijken jouw antwoord (-2 t/m +2) met partijposities. Hoe dichterbij, hoe hoger je match in %."}
      },
      {
        "@type":"Question",
        "name":"Is de kieswijzer onafhankelijk?",
        "acceptedAnswer":{"@type":"Answer","text":"Ja. De tool is onafhankelijk en gebaseerd op partijprogramma’s en openbare standpunten."}
      },
      { 
        "@type":"Question",
        "name":"Hoe zit het met privacy?",
        "acceptedAnswer":{"@type":"Answer","text":"Alles draait lokaal in je browser. Er wordt niets opgeslagen of doorgestuurd."}
      }
    ]
  }
  </script>
  <link rel="canonical" href="https://www.eenvoudige-kieswijzer.nl/">
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body>
  <header>
    <div class="wrap row">
      <h1 class="grow">Eenvoudige Kieswijzer</h1>
      <button id="aboutBtn" class="btn ghost" type="button">Over</button>
    </div>
  </header>

  <section id="intro" class="intro">
    <div class="wrap">
      <div class="card" style="text-align:left">
        <h2 style="margin:0 0 8px">Start de Eenvoudige Kieswijzer</h2>

<p class="muted" style="margin:0 0 12px">
  Klaar voor de komende <strong>gemeenteraadsverkiezingen</strong> van 18 maart 2026? Kies hieronder jouw gemeente en vul de stellingen in.
  Alle gemeenten starten met dezelfde set van 30 stellingen; lokale verschillen kunnen later worden toegevoegd.
</p>
<p class="muted" style="margin:0 0 12px">
</p>
<div class="municipality-select">
  <label for="municipalityButtons">Kies je gemeente</label>
  <div id="municipalityButtons" class="municipality-buttons" role="group" aria-label="Gemeenten"></div>
</div>

<ul class="muted" style="text-align:left; display:inline-block; margin:0 0 16px 0;">
  <li>30 stellingen</li>
  <li>Heldere match per partij in procenten</li>
  <li>Snel, onafhankelijk en privacyvriendelijk</li>
</ul>

<p class="muted" style="margin:0 0 16px">Klaar? Klik op <strong>Start</strong> om direct te beginnen.</p>
<button id="startIntro" class="btn primary" type="button" disabled>Start</button>
        </div>
    </div>
  </section>

  <main class="wrap">
    <div class="card">
      <div class="municipality-banner">
        <span class="muted">Gemeente</span>
        <span id="selectedMunicipality" class="municipality-pill">-</span>
      </div>
      <div class="progress" aria-hidden="true">
        <div id="bar" class="bar"></div>
      </div>

      <div id="quiz">
        <div class="qhead">
          <div class="qmeta">
            <div class="status-chip"><span id="status" class="status">Vraag 1/30</span></div>
            <span id="qtheme" class="theme"></span>
          </div>
          <button id="btn-explain" class="btn ghost" aria-expanded="false">Uitleg</button>
        </div>
        <div id="questionText" class="qtext">—</div>
        <div id="explain" class="explain" aria-live="polite"></div>

        <div class="answers" id="answers"></div>
        <div class="nav-controls">
          <button id="prevQuestion" class="btn primary" type="button" aria-label="Vorige vraag">&#8592;</button>
          <button id="nextQuestion" class="btn primary" type="button" aria-label="Volgende vraag">&#8594;</button>
        </div>
      </div>

      <div id="results">
        <h2 style="margin:0 0 8px">Resultaat</h2>
        <p class="muted" id="resultSubtitle">—</p>
        <p class="muted" style="margin-top:-6px;">Gemeente: <strong id="resultMunicipality">-</strong></p>

        <div class="share-section">
          <button id="shareToggle" class="btn primary" type="button" aria-expanded="false">Resultaat delen via</button>
          <div id="shareOptions" class="share-options" aria-label="Delen" role="group">
            <button class="btn" type="button" data-platform="whatsapp">WhatsApp</button>
            <button class="btn" type="button" data-platform="facebook">Facebook</button>
            <button class="btn" type="button" data-platform="instagram">Instagram</button>
            <button class="btn" type="button" data-platform="email">E-mail</button>
          </div>
        </div>

        <!-- Alleen partijpercentages (hoogste eerst) -->
        <div id="partyList" class="plist"></div>

        <div class="controls" style="margin-top:18px">
          <button id="backToQuiz" class="btn">Terug naar vragen</button>
          <button id="restart" class="btn ghost">Opnieuw (alle antwoorden wissen)</button>
        </div>
      </div>
    </div>
  </main>

<script>
// Antwoordopties (links→rechts)
const ANSWER_SCALE = [
  { label:'Helemaal mee eens', value: 2 },
  { label:'Mee eens', value: 1 },
  { label:'Neutraal', value: 0, className: 'neutral' },
  { label:'Niet mee eens', value: -1 },
  { label:'Helemaal niet mee eens', value: -2 },
  { label:'Geen mening', value: null, className: 'skip' }
];

const ANSWER_STYLE_CLASSES = {
  2: 'ans-strong-yes',
  1: 'ans-yes',
  0: 'ans-neutral',
  '-1': 'ans-no',
  '-2': 'ans-strong-no',
  null: 'ans-skip'
};

// 30 STANDAARD-stellingen
const STANDAARD = [
  { id: 1, thema: "Wonen", 
    tekst: "De overheid bouwt jaarlijks 100.000 woningen; minstens twee derde betaalbaar.",
    uitleg: "Vast bouwtempo en betaalbaar aandeel versus uitvoerbaarheid, kosten en marktwerking." },
  { id: 6, thema: "Wonen", 
    tekst: "Winst op grond door bestemmingswijziging vloeit grotendeels terug naar de samenleving.",
    uitleg: "Publieke afroming van grondwinsten versus belonen van investering en initiatief." },
  { id: 3, thema: "Wonen", 
    tekst: "Sterke huurdersbescherming voor alle huurwoningen; vaste contracten blijven de norm.",
    uitleg: "Meer regulering en zekerheid versus flexibiliteit en investeringsbereidheid." },
  { id: 4, thema: "Wonen", 
    tekst: "Een Nationaal Woonfonds realiseert betaalbare huur zonder winstoogmerk.",
    uitleg: "Publieke/non-profit bouwschaal versus rol van markt en staatsrisico." },
  { id: 5, thema: "Wonen", 
    tekst: "De huren worden tijdelijk bevroren om woonlasten te drukken.",
    uitleg: "Koopkrachtbescherming nu versus achterstallig onderhoud en investeringen later." },
  { id: 2, thema: "Wonen", 
    tekst: "Statushouders krijgen voorrang op sociale huur.",
    uitleg: "Snellere integratie kwetsbare groep versus gevoel van eerlijkheid voor andere wachtenden." },
  { id: 7, thema: "Klimaat & Energie", 
    tekst: "Fossiele subsidies worden afgebouwd; de vervuiler betaalt meer.",
    uitleg: "Sturen via prijsprikkels versus concurrentiepositie en lasten op bedrijven." },
  { id: 8, thema: "Klimaat & Energie", 
    tekst: "Klimaatdoelen worden bijgesteld als ze onhaalbaar of onbetaalbaar blijken.",
    uitleg: "Realistische uitvoering en kostenbeheersing versus voorspelbaarheid en ambitie." },
  { id: 9, thema: "Klimaat & Energie", 
    tekst: "Nederland is in 2040 klimaatneutraal; 65% CO₂-reductie in 2030.",
    uitleg: "Hoge ambitie versnelt transitie versus haalbaarheid en betaalbaarheid." },
  { id: 10, thema: "Gezondheid & Leefstijl", 
    tekst: "Er komt geen suikertaks of vleesbelasting.",
    uitleg: "Keuzevrijheid en koopkracht versus sturing naar gezonder en duurzamer gedrag." },
  { id: 11, thema: "Klimaat & Energie", 
    tekst: "Wind op zee wordt fors uitgebreid met ecologische waarborgen.",
    uitleg: "Meer hernieuwbare energie versus natuurimpact en ruimtegebruik." },
  { id: 12, thema: "Mobiliteit & OV", 
    tekst: "Eén landelijk klimaatticket: onbeperkt ov in daluren voor een lage prijs.",
    uitleg: "OV stimuleren en files verminderen versus kosten en inkomstenderving." },
  { id: 13, thema: "Mobiliteit & OV", 
    tekst: "Openbaar vervoer wordt gefaseerd gratis voor iedereen.",
    uitleg: "OV als basisvoorziening versus structurele financiering en capaciteit." },
  { id: 14, thema: "Zorg", 
    tekst: "Het eigen risico verdwijnt; één publiek Nationaal ZorgFonds komt ervoor terug.",
    uitleg: "Meer solidariteit en eenvoud versus kostenbeheersing en keuzevrijheid." },
  { id: 15, thema: "Zorg & Ethiek", 
    tekst: "Euthanasie bij ernstig psychisch lijden <30 jaar wordt tijdelijk stopgezet.",
    uitleg: "Extra bescherming en zorgaanbod eerst versus autonomie en maatwerk." },
  { id: 16, thema: "Zorg & Ethiek", 
    tekst: "De beraadtermijn keert terug; abortusgrens blijft bij levensvatbaarheid.",
    uitleg: "Meer zorgvuldigheid en medische grens versus keuzevrijheid en toegankelijkheid." },
  { id: 17, thema: "Gezondheid & Leefstijl", 
    tekst: "Preventie volledig in het basispakket; 0% btw op groente en fruit.",
    uitleg: "Gezonde keuze goedkoper en eerder behandelen versus dekking en budgetdruk." },
  { id: 18, thema: "Milieu & Gezondheid", 
    tekst: "Recht op een gezonde leefomgeving wordt wettelijk vastgelegd met strengere normen.",
    uitleg: "Hardere kwaliteitsnormen en handhaving versus uitvoerbaarheid en kosten." },
  { id: 19, thema: "Migratie & Asiel", 
    tekst: "Asielopvang in Nederland wordt beëindigd; toewerken naar een asielstop.",
    uitleg: "Instroom fors beperken versus verdragen, mensenrechten en opvangplicht." },
  { id: 20, thema: "Migratie & Asiel", 
    tekst: "‘Eerste veilige land’ strikt handhaven en een tweestatusstelsel invoeren.",
    uitleg: "Strakkere selectie en regionale opvang versus rechtszekerheid en integratie." },
  { id: 21, thema: "Migratie & Asiel", 
    tekst: "Internationale migratieverdragen worden herzien voor meer nationale regie.",
    uitleg: "Eigen regels kunnen aanscherpen versus diplomatie en internationale samenwerking." },
  { id: 22, thema: "Democratie & Bestuur", 
    tekst: "Het correctief bindend referendum wordt ingevoerd.",
    uitleg: "Meer directe zeggenschap burgers versus bestuurbaarheid en minderheidsrechten." },
  { id: 23, thema: "Defensie & Buitenland", 
    tekst: "Defensie-uitgaven gaan naar 3,5% van het bbp.",
    uitleg: "Meer veiligheid en NAVO-afspraken overtreffen versus verdringing andere uitgaven." },
  { id: 24, thema: "Defensie & Buitenland", 
    tekst: "Geen verdere militarisering; extra defensie-eisen niet ten koste van zorg/onderwijs.",
    uitleg: "Prioriteit sociale sectoren versus geopolitieke dreiging en paraatheid." },
  { id: 25, thema: "Belastingen", 
    tekst: "De hypotheekrenteaftrek wordt stapsgewijs afgebouwd.",
    uitleg: "Eenvoud en rechtvaardigheid woningmarkt versus lasten voor huiseigenaren." },
  { id: 26, thema: "Belastingen", 
    tekst: "Er komt een miljonairsbelasting voor de hoogste vermogens.",
    uitleg: "Herverdelen en publieke investeringen versus kapitaalvlucht en ondernemingsklimaat." },
  { id: 27, thema: "Economie & Koopkracht", 
    tekst: "Maximumprijzen voor basisproducten en energie worden ingevoerd.",
    uitleg: "Bescherming koopkracht versus tekorten en marktverstoring." },
  { id: 28, thema: "Economie & Industriebeleid", 
    tekst: "Een Nationale Investeringsbank financiert strategische sectoren en groeibedrijven.",
    uitleg: "Langetermijninvesteringen en autonomie versus risico’s en politieke sturing." },
  { id: 29, thema: "Mobiliteit & OV", 
    tekst: "Betalen naar gebruik voor auto’s met tijd- en regiovariatie.",
    uitleg: "Eerlijke gebruiker betaalt en minder files versus privacy en lasten." },
  { id: 30, thema: "Digitale & Consumentenrechten", 
    tekst: "Het recht om contant te betalen wordt wettelijk geborgd.",
    uitleg: "Keuzevrijheid en toegankelijkheid versus kosten en veiligheid voor ondernemers." }
];

const MUNICIPALITIES = [
  { id: 'alkmaar', naam: 'Alkmaar' },
  { id: 'almelo', naam: 'Almelo' },
  { id: 'almere', naam: 'Almere' },
  { id: 'amersfoort', naam: 'Amersfoort' },
  { id: 'amstelveen', naam: 'Amstelveen' },
  { id: 'amsterdam', naam: 'Amsterdam' },
  { id: 'apeldoorn', naam: 'Apeldoorn' },
  { id: 'assen', naam: 'Assen' },
  { id: 'bergen-op-zoom', naam: 'Bergen op Zoom' },
  { id: 'breda', naam: 'Breda' },
  { id: 'capelle-aan-den-ijssel', naam: 'Capelle aan den IJssel' },
  { id: 'delft', naam: 'Delft' },
  { id: 'deventer', naam: 'Deventer' },
  { id: 'den-haag', naam: 'Den Haag' },
  { id: 'dordrecht', naam: 'Dordrecht' },
  { id: 'ede', naam: 'Ede' },
  { id: 'eindhoven', naam: 'Eindhoven' },
  { id: 'emmen', naam: 'Emmen' },
  { id: 'enschede', naam: 'Enschede' },
  { id: 'gouda', naam: 'Gouda' },
  { id: 'groningen', naam: 'Groningen' },
  { id: 'haarlem', naam: 'Haarlem' },
  { id: 'haarlemmermeer', naam: 'Haarlemmermeer' },
  { id: 'heerlen', naam: 'Heerlen' },
  { id: 'helmond', naam: 'Helmond' },
  { id: 'hengelo', naam: 'Hengelo' },
  { id: 'hilversum', naam: 'Hilversum' },
  { id: 'leeuwarden', naam: 'Leeuwarden' },
  { id: 'leiden', naam: 'Leiden' },
  { id: 'leidschendam-voorburg', naam: 'Leidschendam-Voorburg' },
  { id: 'lelystad', naam: 'Lelystad' },
  { id: 'maastricht', naam: 'Maastricht' },
  { id: 'nijmegen', naam: 'Nijmegen' },
  { id: 'nissewaard', naam: 'Nissewaard' },
  { id: 'oss', naam: 'Oss' },
  { id: 'purmerend', naam: 'Purmerend' },
  { id: 'roosendaal', naam: 'Roosendaal' },
  { id: 'rotterdam', naam: 'Rotterdam' },
  { id: 's-hertogenbosch', naam: "'s-Hertogenbosch" },
  { id: 'schiedam', naam: 'Schiedam' },
  { id: 'sittard-geleen', naam: 'Sittard-Geleen' },
  { id: 'tilburg', naam: 'Tilburg' },
  { id: 'utrecht', naam: 'Utrecht' },
  { id: 'veenendaal', naam: 'Veenendaal' },
  { id: 'venlo', naam: 'Venlo' },
  { id: 'vlaardingen', naam: 'Vlaardingen' },
  { id: 'westland', naam: 'Westland' },
  { id: 'zaanstad', naam: 'Zaanstad' },
  { id: 'zoetermeer', naam: 'Zoetermeer' },
  { id: 'zwolle', naam: 'Zwolle' }
];

// Elke gemeente gebruikt voorlopig dezelfde stellingen
const data = Object.fromEntries(MUNICIPALITIES.map((m) => [m.id, STANDAARD]));

// ====== PARTIJEN EN POSITIES ======
// PM herijkt op 2025-08-21: placeholders 0=neutraal; vul per partij per stelling -2..2 in.

// Schaal: -2..2 per stelling (zelfde volgorde voor Standaard en Eenvoudig)
const PARTIES = ["BBB", "CDA", "ChristenUnie", "GroenLinks-PvdA", "JA21", "PVV", "SP", "Volt", "VVD"];
const PM = {
  "BBB": [
    1,
    -2,
    -1,
    -1,
    -1,
    -1,
    -1,
    2,
    -2,
    2,
    -1,
    -2,
    -2,
    -1,
    1,
    1,
    1,
    -1,
    2,
    2,
    2,
    2,
    1,
    -1,
    -2,
    -2,
    -2,
    0,
    -2,
    2
  ],
  "CDA": [
    2,
    2,
    1,
    0,
    -1,
    -1,
    1,
    2,
    -2,
    1,
    2,
    0,
    -2,
    -2,
    2,
    2,
    2,
    -1,
    -2,
    2,
    1,
    -2,
    1,
    -1,
    -1,
    -2,
    -1,
    2,
    1,
    2
  ],
  "ChristenUnie": [
    1,
    -1,
    1,
    1,
    0,
    0,
    1,
    0,
    1,
    -1,
    1,
    0,
    0,
    -1,
    2,
    2,
    2,
    1,
    -1,
    1,
    1,
    0,
    1,
    0,
    0,
    -1,
    0,
    1,
    1,
    1
  ],
  "GroenLinks-PvdA": [
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    -2,
    2,
    -1,
    2,
    1,
    1,
    1,
    -1,
    -2,
    2,
    2,
    -2,
    -2,
    -2,
    -1,
    -1,
    1,
    1,
    2,
    1,
    1,
    1,
    0
  ],
  "D66": [
    2,
    2,
    2,
    0,
    0,
    0,
    2,
    -2,
    2,
    -2,
    2,
    2,
    -2,
    -2,
    -2,
    -2,
    2,
    2,
    -2,
    -2,
    -2,
    2,
    2,
    -2,
    2,
    2,
    -2,
    2,
    2,
    0
  ],
  "JA21": [
    1,
    -2,
    -1,
    -2,
    -2,
    -1,
    -1,
    2,
    -1,
    2,
    -1,
    -2,
    -2,
    -2,
    2,
    2,
    1,
    -1,
    2,
    2,
    2,
    2,
    2,
    -2,
    -1,
    -2,
    -2,
    -1,
    -2,
    2
  ],
  "PVV": [
    2,
    1,
    1,
    1,
    2,
    -2,
    -2,
    2,
    -2,
    2,
    -2,
    -1,
    -2,
    2,
    1,
    -1,
    2,
    -2,
    2,
    2,
    2,
    2,
    -1,
    2,
    -2,
    -2,
    1,
    -1,
    -2,
    2
  ],
  "SP": [
    2,
    1,
    2,
    2,
    2,
    2,
    2,
    -1,
    1,
    -2,
    1,
    2,
    2,
    2,
    -2,
    -2,
    2,
    2,
    -2,
    -2,
    -1,
    1,
    -2,
    2,
    0,
    2,
    2,
    1,
    0,
    0
  ],
  "Volt": [
    2,
    2,
    2,
    1,
    1,
    1,
    2,
    -2,
    2,
    -2,
    2,
    2,
    1,
    -2,
    -2,
    -2,
    2,
    2,
    -2,
    -2,
    -1,
    -1,
    -1,
    1,
    2,
    2,
    -1,
    0,
    2,
    1
  ],
  "VVD": [
    -2,
    -2,
    -2,
    -2,
    -2,
    -1,
    -1,
    2,
    -2,
    2,
    1,
    -2,
    -2,
    -2,
    -2,
    -2,
    1,
    -2,
    -1,
    2,
    1,
    -2,
    2,
    -2,
    -2,
    -2,
    -2,
    -2,
    -1,
    1
  ]
};

let idx = 0;
let selectedMunicipality = '';
let answersByMunicipality = {};
let latestPartyResults = [];

const $ = (sel) => document.querySelector(sel);

function highlightMunicipalityButtons(container){
  if (!container) return;
  Array.from(container.querySelectorAll('button')).forEach((btn) => {
    const isActive = btn.dataset.id === selectedMunicipality;
    btn.classList.toggle('selected', isActive);
    btn.setAttribute('aria-pressed', isActive ? 'true' : 'false');
  });
}

function municipalityName(id){
  return MUNICIPALITIES.find((m) => m.id === id)?.naam || 'Onbekend';
}

function currentList(){ return data[selectedMunicipality] || STANDAARD; }
function currentAnswers(){
  if (!answersByMunicipality[selectedMunicipality]){
    answersByMunicipality[selectedMunicipality] = new Array(currentList().length).fill(null);
  }
  return answersByMunicipality[selectedMunicipality];
}

function updateStartButtonState(){
  const start = document.getElementById('startIntro');
  if (start){
    start.disabled = !selectedMunicipality;
  }
}

function setMunicipality(id, opts = {}){
  if (!data[id]) return;
  selectedMunicipality = id;
  idx = 0;
  const label = municipalityName(id);
  const pill = $('#selectedMunicipality');
  if (pill) pill.textContent = label;
  const resultLabel = $('#resultMunicipality');
  if (resultLabel) resultLabel.textContent = label;
  highlightMunicipalityButtons(document.getElementById('municipalityButtons'));
  updateStartButtonState();
  if (!opts.noRender) renderQuestion();
}

function setStatus(){
  $('#status').textContent = `Vraag ${idx+1}/${currentList().length}`;
  // 3) voortgangsbalk gelijk aan vraagpositie
  const pct = Math.round(100 * ((idx + 1) / currentList().length));
  $('#bar').style.width = pct + '%';
}

function renderQuestion(){
  if (idx >= currentList().length) idx = currentList().length - 1;
  if (idx < 0) idx = 0;

  const s = currentList()[idx];
    $('#qtheme').textContent = s.thema || '';
  $('#questionText').textContent = s.tekst;
  $('#explain').style.display = 'none';
  $('#btn-explain').setAttribute('aria-expanded','false');
  $('#explain').textContent = s.uitleg;

  const sel = currentAnswers()[idx];
  const ctr = $('#answers');
  ctr.innerHTML = '';
  ANSWER_SCALE.forEach((opt) => {
    const b = document.createElement('button');
    b.type = 'button';
    b.textContent = opt.label;
    const styleClass = ANSWER_STYLE_CLASSES[opt.value === null ? 'null' : opt.value];
    if (styleClass) b.classList.add(styleClass);
    if (sel === opt.value) b.classList.add('selected');
    b.addEventListener('click', () => {
      // sla keuze op en laat selectie even zichtbaar
      currentAnswers()[idx] = opt.value;
      // forceer visuele selectie
      Array.from(ctr.querySelectorAll('button')).forEach(btn => btn.classList.remove('selected'));
      b.classList.add('selected');
      setStatus(); // update voortgangstekst maar blijf op deze vraag
      // 2) 0.01s wachten voor automatische doorgang
      setTimeout(() => {
        if (idx < currentList().length - 1){
          idx++;
          renderQuestion();
        } else {
          showResults();
        }
      }, 1);
    });
    ctr.appendChild(b);
  });

  document.querySelector('#quiz').style.display = 'block';
  document.querySelector('#results').style.display = 'none';

  setStatus();

  const prevBtn = $('#prevQuestion');
  if (prevBtn){
    prevBtn.disabled = idx === 0;
  }
  const nextBtn = $('#nextQuestion');
  if (nextBtn){
    nextBtn.disabled = false;
  }
}

function goToPreviousQuestion(){
  if (idx <= 0) return;
  idx -= 1;
  renderQuestion();
}

function goToNextQuestion(){
  if (idx < currentList().length - 1){
    idx += 1;
    renderQuestion();
  } else {
    showResults();
  }
}

function showExplain(){
  const el = $('#explain');
  const open = el.style.display === 'block';
  el.style.display = open ? 'none' : 'block';
  $('#btn-explain').setAttribute('aria-expanded', open ? 'false' : 'true');
}

function answeredCount(){
  return currentAnswers().filter((v) => v !== null).length;
}

// ====== Partijmatch ======
function computePartyPercents(){
  const ans = currentAnswers();
  const usedIdx = ans.map((v,i)=> v===null ? null : i).filter(v=>v!==null);
  const result = [];
  for(const partij of Object.keys(PM)){
    const pos = PM[partij];
    let sum = 0;
    let n = 0;
    for(const i of usedIdx){
      const diff = Math.abs(ans[i] - pos[i]);
      const sim = 1 - (diff / 4);
      sum += sim;
      n += 1;
    }
    const pct = n ? Math.round(100 * (sum / n)) : 0;
    result.push({ partij, pct });
  }
  result.sort((a,b)=> b.pct - a.pct);
  return result;
}

function resetShareOptions(){
  const options = $('#shareOptions');
  const toggle = $('#shareToggle');
  if (options) options.style.display = 'none';
  if (toggle) toggle.setAttribute('aria-expanded','false');
}

function buildShareMessage(){
  const municipality = municipalityName(selectedMunicipality);
  const topMatch = latestPartyResults?.[0];
  const topText = topMatch ? ` Hoogste match: ${topMatch.partij} (${topMatch.pct}%).` : '';
  return `Mijn resultaat van de Eenvoudige Kieswijzer voor ${municipality}.${topText}`;
}

function buildShareUrl(platform){
  const baseUrl = encodeURIComponent(window.location.href.split('#')[0]);
  const message = encodeURIComponent(buildShareMessage());
  switch(platform){
    case 'whatsapp':
      return `https://api.whatsapp.com/send?text=${message}%20${baseUrl}`;
    case 'facebook':
      return `https://www.facebook.com/sharer/sharer.php?u=${baseUrl}`;
    case 'instagram':
      return `https://www.instagram.com/?url=${baseUrl}`;
    case 'email':
      return `mailto:?subject=${encodeURIComponent('Mijn stemwijzer-resultaat')}&body=${message}%0A%0A${baseUrl}`;
    default:
      return '';
  }
}

let lastScreenshotUrl = null;

async function generateResultScreenshot(){
  const resultsEl = document.querySelector('#results');
  if (!resultsEl || typeof html2canvas !== 'function') return null;

  const canvas = await html2canvas(resultsEl, {
    backgroundColor: '#f8fafc',
    scale: window.devicePixelRatio > 1 ? 2 : 1.5,
    useCORS: true,
    windowWidth: document.documentElement.scrollWidth,
  });

  return new Promise((resolve) => {
    canvas.toBlob((blob) => {
      if (!blob){
        resolve(null);
        return;
      }
      if (lastScreenshotUrl){
        URL.revokeObjectURL(lastScreenshotUrl);
      }
      lastScreenshotUrl = URL.createObjectURL(blob);
      resolve({ blob, url: lastScreenshotUrl });
    }, 'image/png');
  });
}

function openImageHelper(url, message){
  const helperWin = window.open('', '_blank');
  if (!helperWin) return;
  helperWin.document.write(`
    <div style="font-family:Inter,system-ui,sans-serif; padding:12px; line-height:1.5;">
      <p><strong>Download de afbeelding hieronder</strong> en deel deze samen met je bericht:</p>
      <p>${message}</p>
      <img src="${url}" alt="Resultaat" style="width:100%; max-width:980px; border:1px solid #d7e1ef; border-radius:12px;" />
    </div>
  `);
}

async function handleShareClick(platform){
  const screenshot = await generateResultScreenshot();
  const message = buildShareMessage();
  const baseUrl = buildShareUrl(platform);

  if (screenshot?.blob){
    const file = new File([screenshot.blob], 'kieswijzer-resultaat.png', { type:'image/png' });
    const shareData = { title: 'Mijn stemwijzer-resultaat', text: message, files: [file] };
    if (navigator.canShare && navigator.canShare({ files: [file] })){
      try {
        await navigator.share(shareData);
        return;
      } catch (err){
        console.error('Delen via systeemmethode mislukt:', err);
      }
    }
  }

  if (screenshot?.url){
    openImageHelper(screenshot.url, message);
  }

  if (baseUrl) window.open(baseUrl, '_blank', 'noopener,noreferrer');
}

function toggleShareOptions(){
  const options = $('#shareOptions');
  const toggle = $('#shareToggle');
  if (!options || !toggle) return;
  const isVisible = options.style.display === 'flex';
  options.style.display = isVisible ? 'none' : 'flex';
  toggle.setAttribute('aria-expanded', isVisible ? 'false' : 'true');
}

function showResults(){
  const answered = answeredCount();
  const total = currentList().length;
  const subtitle = $('#resultSubtitle');
  if (subtitle){
    subtitle.style.display = 'block';
    subtitle.textContent = answered === 0
      ? 'Beantwoord eerst minimaal één stelling voor een betrouwbare match.'
      : `Gebaseerd op ${answered} van ${total} stellingen${answered === total ? '' : '. Onbeantwoorde vragen tellen niet mee.'}`;
  }
  const resultLabel = $('#resultMunicipality');
  if (resultLabel) resultLabel.textContent = municipalityName(selectedMunicipality);

  const list = answered === 0 ? [] : computePartyPercents();
  latestPartyResults = list;
  resetShareOptions();
  const wrap = $('#partyList');
  wrap.innerHTML = '';
  if (answered === 0){
    const msg = document.createElement('p');
    msg.className = 'muted';
    msg.textContent = 'Er zijn nog geen antwoorden gegeven. Ga terug naar de vragen en kies minimaal één antwoord.';
    wrap.appendChild(msg);
  } else {
    list.forEach((row, i) => {
      const div = document.createElement('div');
      div.className = 'prow';
      div.innerHTML = `<div class="rank">${i+1}</div>
                       <div class="party">${row.partij}</div>
                       <div class="pct">${row.pct}%</div>`;
      wrap.appendChild(div);
    });
  }

  document.querySelector('#quiz').style.display = 'none';
  document.querySelector('#results').style.display = 'block';

}

function backToQuiz(){
  document.querySelector('#results').style.display = 'none';
  document.querySelector('#quiz').style.display = 'block';
  renderQuestion();
}

function restartAll(){
  answersByMunicipality[selectedMunicipality] = new Array(currentList().length).fill(null);
  idx = 0;
  renderQuestion();
}

// Event bindings
document.querySelector('#btn-explain').addEventListener('click', showExplain);
document.querySelector('#backToQuiz').addEventListener('click', backToQuiz);
document.querySelector('#restart').addEventListener('click', restartAll);
const prevBtn = document.querySelector('#prevQuestion');
if (prevBtn) prevBtn.addEventListener('click', goToPreviousQuestion);
const nextBtn = document.querySelector('#nextQuestion');
if (nextBtn) nextBtn.addEventListener('click', goToNextQuestion);
const shareToggle = document.querySelector('#shareToggle');
if (shareToggle) shareToggle.addEventListener('click', toggleShareOptions);
document.querySelectorAll('#shareOptions button').forEach((btn) => {
  btn.addEventListener('click', () => handleShareClick(btn.dataset.platform));
});

function setupIntro(){
  const intro = document.getElementById('intro');
  const quiz = document.querySelector('#quiz');
  const results = document.querySelector('#results');
  const progress = document.querySelector('.progress');
  if (!intro || !quiz) return;
  const buttonWrap = document.getElementById('municipalityButtons');
  if (buttonWrap){
    buttonWrap.innerHTML = '';
    MUNICIPALITIES.forEach((m) => {
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'btn';
      btn.dataset.id = m.id;
      btn.textContent = m.naam;
      btn.addEventListener('click', () => setMunicipality(m.id));
      buttonWrap.appendChild(btn);
    });
    highlightMunicipalityButtons(buttonWrap);
  } else {
    setMunicipality(selectedMunicipality, { noRender: true });
  }
  updateStartButtonState();
  // Show intro first
  if (quiz) quiz.style.display = 'none';
  if (results) results.style.display = 'none';
  intro.style.display = 'block';
  document.body.classList.add('intro-active');
  if (progress) progress.style.display = 'none';
  const startBtn = document.getElementById('startIntro');
  if (startBtn){
    startBtn.addEventListener('click', () => {
      if (!selectedMunicipality) return;
      setMunicipality(selectedMunicipality);
      intro.style.display = 'none';
      document.body.classList.remove('intro-active');
      if (quiz) quiz.style.display = 'block';
      if (progress) progress.style.display = 'block';
      // Mobile: scroll zodat de voortgangsbalk direct zichtbaar is
      const isMobile = window.matchMedia && window.matchMedia('(max-width: 800px)').matches;
      const headerHeight = document.querySelector('header')?.offsetHeight || 0;
      const target = progress ? (progress.getBoundingClientRect().top + window.scrollY - headerHeight - 8) : 0;
      const scrollToTop = Math.max(target, 0);
      if (isMobile && progress){
        try{ window.scrollTo({top: scrollToTop, behavior:'smooth'}); }catch(e){ window.scrollTo(0,scrollToTop); }
      } else {
        try{ window.scrollTo({top:0, behavior:'smooth'}); }catch(e){ window.scrollTo(0,0); }
      }
    });
  }
}

// Init
setMunicipality(selectedMunicipality, { noRender: true });
renderQuestion();
setupIntro();
</script>
<!-- About modal -->
  <div id="aboutModal" class="aboutmodal" role="dialog" aria-modal="true" aria-labelledby="aboutTitle" style="display:none">
    <div class="aboutcard">
      <div class="abouthead">
        <h3 id="aboutTitle" style="margin:0">Over deze kieswijzer</h3>
        <button id="aboutClose" class="btn" type="button" aria-label="Sluiten">Sluiten</button>
      </div>
      <div class="aboutcontent">
  <p><strong>Over deze kieswijzer</strong><br>
  De <em>Eenvoudige Kieswijzer</em> is een onafhankelijke, snelle <strong>stemhulp / kieshulp</strong> voor de gemeenteraadsverkiezingen van 18 maart 2026. In duidelijke stellingen vergelijk je jouw mening met de standpunten van politieke partijen. Resultaat: een heldere match per partij.</p>

  <h4>Waarom deze kieswijzer?</h4>
  <ul>
    <li><strong>Eenvoudig & snel:</strong> 30 heldere stellingen.</li>
    <li><strong>Transparant:</strong> we scoren jouw keuze (-2 t/m +2) tegenover partijposities per stelling.</li>
    <li><strong>Privacy-vriendelijk:</strong> geen account nodig.</li>
  </ul>

  <h4>Hoe werkt de score?</h4>
  <p>Per stelling vergelijken we jouw antwoord met de positie van elke partij. Hoe dichterbij, hoe hoger de overeenkomst in procenten. Je ziet een gesorteerde lijst met partijmatches.</p>

  <h4>Bronnen</h4>
  <p>Gebaseerd op de partijprogramma’s:</p>
  <ul>
    <li>BBB — programma 2025</li>
    <li>CDA — programma 2025</li>
    <li>ChristenUnie — programma 2025</li>
    <li>GroenLinks-PvdA — programma 2025</li>
    <li>D66 — programma 2025</li>
    <li>JA21 — programma 2025</li>
    <li>PVV — programma 2025</li>
    <li>SP — programma 2025</li>
    <li>Volt — programma 2025</li>
    <li>VVD — programma 2025</li>
  </ul>

  <h4>Contact</h4>
  <p>Feedback of suggesties? Mail: <a href="mailto:eenvoudigekieswijzer@gmail.com">eenvoudigekieswijzer@gmail.com</a>.</p>

  <h4>Doneren</h4>
  <p>Wil je dit vrijwillige project steunen? Mail: <a href="mailto:eenvoudigekieswijzer@gmail.com">eenvoudigekieswijzer@gmail.com</a>.</p>
      </div>
    </div>
  </div>
<script>
(function(){
  function toggleAbout(show){
    const m = document.getElementById('aboutModal');
    if (!m) return;
    const computed = (window.getComputedStyle ? getComputedStyle(m).display : m.style.display);
    const isShown = computed && computed !== 'none';
    const next = (show === true) ? true : (show === false ? false : !isShown);
    m.style.display = next ? 'flex' : 'none';
    if (next){ m.querySelector('.aboutcard')?.scrollIntoView({behavior:'smooth', block:'center'}); }
  }
  document.addEventListener('DOMContentLoaded', () => {
    const btn = document.getElementById('aboutBtn');
    if (btn) btn.addEventListener('click', () => toggleAbout());
    const close = document.getElementById('aboutClose');
    if (close) close.addEventListener('click', () => toggleAbout(false));
    const modal = document.getElementById('aboutModal');
    if (modal) modal.addEventListener('click', (e)=>{ if(e.target === modal) toggleAbout(false); });
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') toggleAbout(false); });
  });
})();
</script>
</body>
</html>
